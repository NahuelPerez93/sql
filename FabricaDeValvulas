CREATE DATABASE fabrica_de_valvulas;

USE fabrica_de_valvulas;


CREATE TABLE fabrica_de_valvulas.Proveedor (
    ID_PROVEEDOR INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(50) NOT NULL,
    DIRECCION VARCHAR(250),
    TELEFONO VARCHAR(20),
    PRIMARY KEY (ID_PROVEEDOR)
);

CREATE TABLE fabrica_de_valvulas.Materiales (
    ID_MATERIALES INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(50) NOT NULL,
    PRECIO DECIMAL(10,2) NOT NULL,
    PRIMARY KEY (ID_MATERIALES)
);

CREATE TABLE fabrica_de_valvulas.Ciudad (
    ID_CIUDAD INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(50) NOT NULL,
    PROVINCIA VARCHAR(250) NOT NULL,
    PRIMARY KEY (ID_CIUDAD)
);

CREATE TABLE fabrica_de_valvulas.Transporte (
    ID_TRANSPORTE INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(50) NOT NULL,
    TELEFONO VARCHAR(20),
    PRIMARY KEY (ID_TRANSPORTE)
);

CREATE TABLE fabrica_de_valvulas.Empleado (
    ID_EMPLEADO INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(50) NOT NULL,
    CARGO VARCHAR(250),
    DIRECCION VARCHAR(250),
    TELEFONO VARCHAR(20),
    PRIMARY KEY (ID_EMPLEADO)
);

CREATE TABLE fabrica_de_valvulas.Cliente (
    ID_CLIENTE INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(50) NOT NULL,
    DIRECCION VARCHAR(250),
    TELEFONO VARCHAR(20),
    PRIMARY KEY (ID_CLIENTE)
);

CREATE TABLE fabrica_de_valvulas.Valvula (
    ID_VALVULA INT NOT NULL AUTO_INCREMENT,
    ID_MATERIAL INT NOT NULL,
    CANTIDAD VARCHAR (250),
    PRIMARY KEY (ID_VALVULA),
    FOREIGN KEY (ID_MATERIAL) REFERENCES Materiales(ID_MATERIALES) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE fabrica_de_valvulas.Pedidos (
    ID_PEDIDO INT NOT NULL AUTO_INCREMENT,
    ID_EMPLEADO INT NOT NULL,
    ID_VALVULA INT NOT NULL,
    PRIMARY KEY (ID_PEDIDO),
    FOREIGN KEY (ID_EMPLEADO) REFERENCES Empleado(ID_EMPLEADO) ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (ID_VALVULA) REFERENCES Valvula(ID_VALVULA) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE fabrica_de_valvulas.Facturas (
    ID_FACTURA INT NOT NULL AUTO_INCREMENT,
    ID_PEDIDO INT NOT NULL,
    FECHA DATE NOT NULL,
    MONTO DECIMAL(10,2) NOT NULL,
    ESTADO_FACTURA VARCHAR(50),
    PRIMARY KEY (ID_FACTURA),
    FOREIGN KEY (ID_PEDIDO) REFERENCES Pedidos(ID_PEDIDO) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE fabrica_de_valvulas.Envios (
    ID_ENVIO INT NOT NULL AUTO_INCREMENT,
    ID_PEDIDO INT NOT NULL,
    FECHA DATE NOT NULL,
    CANTIDAD VARCHAR(100),
    PRIMARY KEY (ID_ENVIO),
    FOREIGN KEY (ID_PEDIDO) REFERENCES Pedidos(ID_PEDIDO) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE fabrica_de_valvulas.Detalle_del_pedido (
    ID_DETALLEPEDIDO INT NOT NULL AUTO_INCREMENT,
    ID_PEDIDO INT NOT NULL,
    ID_VALVULA INT NOT NULL,
    CANTIDAD INT NOT NULL,
    PRECIO_UNITARIO DECIMAL(10,2) NOT NULL,
    PRIMARY KEY (ID_DETALLEPEDIDO),
    FOREIGN KEY (ID_PEDIDO) REFERENCES Pedidos(ID_PEDIDO) ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (ID_VALVULA) REFERENCES Valvula(ID_VALVULA) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE fabrica_de_valvulas.PAGA (
    ID_PAGA INT NOT NULL AUTO_INCREMENT,
    FECHA DATE NOT NULL,
    HORA_ENTRADA TIME NOT NULL,
    ID_EMPLEADO INT NOT NULL,
    HORA_SALIDA TIME NOT NULL,
    PRIMARY KEY (ID_PAGA),
    FOREIGN KEY (ID_EMPLEADO) REFERENCES Empleado(ID_EMPLEADO) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE fabrica_de_valvulas.Inspecciones (
    ID_INSPECCION INT NOT NULL AUTO_INCREMENT,
    ID_VALVULA INT NOT NULL,
    FECHA DATE NOT NULL,
    RESULTADO VARCHAR(20),
    OBSERVACIONES VARCHAR(300),
    PRIMARY KEY (ID_INSPECCION),
    FOREIGN KEY (ID_VALVULA) REFERENCES Valvula(ID_VALVULA) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE fabrica_de_valvulas.Inspector (
    ID_INSPECTOR INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(50) NOT NULL,
    TELEFONO VARCHAR(20),
    APELLIDO VARCHAR(50) NOT NULL,
    PRIMARY KEY (ID_INSPECTOR)
);
